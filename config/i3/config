#######################################
######### dillacorn i3 config #########
#######################################
# https://github.com/dillacorn/arch-i3-dots

# disable_window_borders
default_border pixel 1

# set inner/outer gaps
gaps inner 10
gaps outer 10

# mod keys
set $mod Mod1  # Default mod key is Mod1 (Alt)
set $mod4 Mod4  # Secondary mod key is Mod4 (Super/Windows)

# direction keys
set $left h
set $down j
set $up k
set $right l

# terminal and applications
set $term alacritty
set $lock i3lock --color 000000
set $files pcmanfm
set $webcam mpv av://v4l1:/dev/video0 --profile=low-latency --untimed
set $mpv mpv --force-window idle
set $run rofi -show run
set $drun rofi -show drun
set $screenshot1 grim -s '%Y-%m-%d_%H:%M:%S.jpg' -e 'mv $f ~/Pictures'
set $screenshot2 flameshot gui
set $rotate ~/.config/i3/scripts/rotate_config_navigation.sh
set $themes selected=$(ls ~/.config/i3/themes/ | rofi -dmenu -p "Select Theme") && bash ~/.config/i3/themes/$selected

####################
### input/output ###
####################

# custom res and configuration script
exec --no-startup-id ~/.config/i3/scripts/custom_res.sh

# persistant digital vibrance command
exec_always --no-startup-id vibrant-cli DisplayPort-1 1.4
exec_always --no-startup-id vibrant-cli DisplayPort-2 1.4

# shuffle and display random wallpaper
exec_always --no-startup-id feh --randomize --bg-fill ~/Pictures/wallpapers/*

# virtual machine ~ for testing
exec --no-startup-id xrandr --output Virtual-1 --mode 1920x1080 --rate 60
exec --no-startup-id xrandr --output Virtual1 --mode 1920x1080 --rate 60

###################
### idle config ###
###################

exec --no-startup-id xautolock -corners -000 -time 10 -locker 'i3lock' -c 000000 &

#############
### binds ###
#############

# Lockscreen and window manager controls (using Mod4)
set $i3exit [L]OCK       LOG[O]UT       [S]USPEND       [R]EBOOT       [P]OWEROFF
bindsym $mod+ctrl+shift+p mode "i3exit"

mode "i3exit" {
    bindsym l mode "default", exec --no-startup-id ~/.config/i3/scripts/i3exit.sh lock
    bindsym o mode "default", exec --no-startup-id ~/.config/i3/scripts/i3exit.sh logout
    bindsym s mode "default", exec --no-startup-id ~/.config/i3/scripts/i3exit.sh suspend
    bindsym r mode "default", exec --no-startup-id ~/.config/i3/scripts/i3exit.sh reboot
    bindsym p mode "default", exec --no-startup-id ~/.config/i3/scripts/i3exit.sh shutdown

    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# rofi launcher (Mod1 for run/drun)
bindsym $mod+p exec $drun
bindsym $mod+shift+p exec $run

# screenshots (Mod4 for screenshots)
bindsym --release $mod4+shift+s exec $screenshot1
bindsym $mod4+ctrl+shift+s exec $screenshot2

# capture gif (Mod4 for gif capture)
bindsym $mod4+shift+g exec --no-startup-id ~/.config/i3/scripts/gif.sh

# terminal (Mod1 for terminal)
bindsym $mod+shift+Return exec $term

# kill focused window
bindsym $mod+shift+c kill

# lock screen (Mod4 for locking)
bindsym $mod4+ctrl+shift+l exec $lock

# open file manager
bindsym $mod4+e exec $files

# floating windows
floating_modifier $mod

# reload i3 config
bindsym $mod+shift+q restart

# rotate alt/super config+reload script (Mod4 for rotating config)
bindsym $mod4+shift+r exec $rotate

# theme change with rofi (Mod4 for changing themes)
bindsym $mod4+shift+t exec $themes

# focus window navigation
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
# alternative with arrow keys
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+shift+$left move left
bindsym $mod+shift+$down move down
bindsym $mod+shift+$up move up
bindsym $mod+shift+$right move right
# or use $mod1+[up|down|left|right]
bindsym $mod+shift+Left move left
bindsym $mod+shift+Down move down
bindsym $mod+shift+Up move up
bindsym $mod+shift+Right move right

###################
### workspaces: ###
###################

# define workspaces and icons
set $ws1 "1: "
set $ws2 "2: "
set $ws3 "3: "
set $ws4 "4: "
set $ws5 "5: "
set $ws6 "6: "
set $ws7 "7: "
set $ws8 "8: "
set $ws9 "9: "
set $ws0 "10: "

# default workspaces for common programs
assign [class="^Moonlight"] $ws1
assign [class="^LibreWolf$"] $ws2
assign [class="^Io.github.ungoogled_software.ungoogled_chromium$"] $ws2
assign [class="^vesktop$"] $ws3
assign [class="^steam$"] $ws4
assign [class="^itch$"] $ws4
assign [class="^Spotify$"] $ws5
assign [class="^TelegramDesktop$"] $ws6
assign [class="^TigerVNC Viewer"] $ws7
assign [class="^teams-for-linux"] $ws8
assign [class="^kdenlive"] $ws9
assign [class="^Shotcut$"] $ws9
assign [class="^krita$"] $ws9
assign [class="^obs$"] $ws0

# Workspace switching
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws0

# Move focused window to workspace
bindsym $mod+shift+1 move container to workspace number $ws1
bindsym $mod+shift+2 move container to workspace number $ws2
bindsym $mod+shift+3 move container to workspace number $ws3
bindsym $mod+shift+4 move container to workspace number $ws4
bindsym $mod+shift+5 move container to workspace number $ws5
bindsym $mod+shift+6 move container to workspace number $ws6
bindsym $mod+shift+7 move container to workspace number $ws7
bindsym $mod+shift+8 move container to workspace number $ws8
bindsym $mod+shift+9 move container to workspace number $ws9
bindsym $mod+shift+0 move container to workspace number $ws0

######################
### media controls ###
######################

# media keys
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume 0 +5%
bindsym XF86AudioLowerVolume exec pactl set-sink-volume 0 -5%
bindsym XF86AudioMute exec pactl set-sink-mute 0 toggle

# brightness control
bindsym XF86MonBrightnessUp exec brightnessctl set 10%+
bindsym XF86MonBrightnessDown exec brightnessctl set 10%-

####################
### bar / themes ###
####################

# font for window titles and bars
font pango: Hack 10

#start of bar section
bar {
    position top
    status_command i3status -c ~/.config/i3/i3status.conf
    colors {
        background #282828
        statusline #FFFFFF
        separator  #666666
        
        focused_workspace  #262626 #E4DBBD #282828
        active_workspace   #333333 #222222 #E3DDBA
        inactive_workspace #333333 #222222 #888888
        urgent_workspace   #2F343A #900000 #FFFFFF
        binding_mode       #2F343A #900000 #FFFFFF
    }
}
#end of bar section

# window title bars & borders section
client.focused          #262626 #E4DBBD #E3DDBA #E4DBBD   #BFB293
client.focused_inactive #333333 #272727 #D79920 #484E50   #5F676A
client.unfocused        #333333 #222222 #888888 #292D2E   #222222
client.urgent           #2f343a #900000 #FFFFFF #900000   #900000
client.placeholder      #000000 #303446 #FFFFFF #000000   #0C0C0C
client.background       #FFFFFF

#################
### autostart ###
#################

exec --no-startup-id lxpolkit
exec --no-startup-id blueman-applet
exec --no-startup-id nm-applet
exec --no-startup-id solaar --window hide
exec_always --no-startup-id dunst
